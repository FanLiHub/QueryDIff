<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="description"
    content="Teach than to Give: Domain Generalized Semantic Segmentation via Agent Queries with Diffusion Model Guidance">
  <meta name="keywords" content="QueryDiff, Domain Generalized, Segmentation, Diffusion">
  <meta name="viewport" content="width=device-width, initial-scale=1">
<title>Better to Teach than to Give: Domain Generalized Semantic Segmentation via Agent Queries with Diffusion Model Guidance</title>


  <link href="https://fonts.googleapis.com/css?family=Google+Sans|Noto+Sans|Castoro" rel="stylesheet">

  <link rel="stylesheet" href="./static/css/bulma.min.css">
  <link rel="stylesheet" href="./static/css/bulma-carousel.min.css">
  <link rel="stylesheet" href="./static/css/bulma-slider.min.css">
  <link rel="stylesheet" href="./static/css/fontawesome.all.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jpswalsh/academicons@1/css/academicons.min.css">
  <link rel="stylesheet" href="./static/css/index.css">
  <link rel="icon" href="./static/images/favicon.png">

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script defer src="./static/js/fontawesome.all.min.js"></script>
  <script src="./static/js/bulma-carousel.min.js"></script>
  <script src="./static/js/bulma-slider.min.js"></script>
  <script src="./static/js/index.js"></script>

  <style>
    .publication-title { margin-bottom: 0.5rem !important; }
    .publication-authors { margin-top: 0.25rem !important; margin-bottom: 0.25rem !important; }
    .top-hero .hero-body { padding-top: 1.25rem; padding-bottom: 1.25rem; }
    .section.teaser { padding-top: 1rem; padding-bottom: 1rem; }
  </style>

</head>

<body>



  <section class="hero top-hero">
    <div class="hero-body">
      <div class="container is-max-desktop">
        <div class="columns is-centered">
          <div class="column has-text-centered">
            <h1 class="title is-1 publication-title">
              <img src="./static/images/Icon.png" width="50" height="50"></img> <span
                style="color: #FF0078;">Query</span><span style="color: #00509A;">Diff</span>
            </h1>
<h1 class="title is-2 publication-title">
  Better to Teach than to Give:Domain Generalized Semantic Segmentation via Agent Queries with Diffusion Model Guidance
</h1>
            <div class="is-size-5 publication-authors">
              <span class="author-block">
                Fan Li,</span>
              <span class="author-block">
                Xuan Wang,</span>
              <span class="author-block">
                Min Qi, </span>
              <span class="author-block">
                Zhaoxiang Zhang,</span>
              <span class="author-block">
                Yuelei Xu*</span>
            </div>

            <div class="is-size-5 publication-authors">
              <span class="author-block">Northwestern Polytechnical University</span>
            </div>

            <div class="column has-text-centered">
              <div class="publication-links">
                <!-- PDF Link. -->
                <span class="link-block">
                  <a href="static/pdf/Domain_Generalized_Semantic_Segmentation_via_Agent_Queries_with_Diffusion_Model_Guidance.pdf" class="external-link button is-normal is-rounded is-dark">
                    <span class="icon">
                      <i class="fas fa-file-pdf"></i>
                    </span>
                    <span>Paper</span>
                  </a>
                </span>
                <!-- Code Link. -->
                <span class="link-block">
                  <a href="https://github.com/FanLiHub/QueryDiff" class="external-link button is-normal is-rounded is-dark">
                    <span class="icon">
                      <i class="fab fa-github"></i>
                    </span>
                    <span>Code</span>
                  </a>
                </span>

              </div>

            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <section class="hero teaser">
    <div class="container is-max-desktop">
      <div class="hero-body" style="padding-bottom: 10px;">
        <img src="static/images/compa.png" class="center">
      </div>
    </div>
  </section>

  <section class="section">
    <div class="container is-max-desktop">
      <!-- Abstract. -->
      <div class="columns is-centered has-text-centered">
        <div class="column is-four-fifths">
          <h2 class="title is-3">Abstract</h2>
          <div class="content has-text-justified">
            <p>
Domain Generalized Semantic Segmentation (DGSS) trains a model on a labeled source domain to generalize to unseen target domains with consistent contextual distribution and varying visual appearance.
Most existing methods rely on domain randomization or data generation but struggle to capture the underlying scene distribution, resulting in the loss of useful semantic information. 
Inspired by the diffusion model's capability to generate diverse variations within a given scene context, we consider harnessing its rich prior knowledge of scene distribution to tackle the challenging DGSS task.
In this paper, we propose a novel agent <strong>Query</strong>-driven learning framework based on <strong>Diff</strong>usion model guidance for DGSS, named <strong>QueryDiff</strong>. 
Our recipe comprises three key ingredients: (1) generating agent queries from segmentation features to aggregate semantic information about instances within the scene; 
(2) learning the inherent semantic distribution of the scene through agent queries guided by diffusion features; 
(3) refining segmentation features using optimized agent queries for robust mask predictions.
Extensive experiments across various settings demonstrate that our method significantly outperforms previous state-of-the-art methods. 
Notably, it enhances the model's ability to generalize effectively to extreme domains, such as cubist art styles
            </p>
          </div>
        </div>
      </div>
      <!--/ Abstract. -->
      
      <!-- Method. -->
      <div class="columns is-centered has-text-centered">
        <div class="column is-four-fifths">
          <h2 class="title is-3">Method</h2>
          <div class="content has-text-centered">
            <img src="static/images/framework.png" class="center">
            
            A brief illustration of our proposed framework. First, we use learnable queries to aggregate hierarchical instance features from the segmentation backbone, progressively merging them to form agent queries. Next, we utilize agent queries to learn the scene distribution information embedded in the diffusion features, optimizing their semantic representations through diffusion consistency loss (DCL) that removes visual appearance information irrelevant to the perceptual task from the diffusion features.
    Finally, we use the optimized agent queries to refine the instance features of the segmentation decoder and output the prediction mask.
          </div>
        </div>
      </div>
      <!--/ Method. -->

      

      <!-- Qualitative. -->
      <div class="columns is-centered has-text-centered">
        <div class="column is-four-fifths">
          <h2 class="title is-3">Qualitative Results</h2>
          <div class="content has-text-centered">
            <img src="./static/images/qualitatives.png" class="center">
            
            Qualitative comparison under Gâ†’{C, B, M} generalization setting. From left to right: target image, the visual results predicted by Rein, Ours, and Ground Truth. We deploy the white dash boxes to highlight different prediction parts.
          </div>
        </div>
      </div>
  </section>

  <section class="section" id="BibTeX">
    <div class="container is-max-desktop content">
      <h2 class="title">BibTeX</h2>
      <pre><code>@inproceedings{li2025betterAdd commentMore actions
        title={Better to Teach than to Give: Domain Generalized Semantic Segmentation via Agent Queries with Diffusion Model Guidance},
        author={Li, Fan and Wang, Xuan and Qi, Min and Zhang, Zhaoxiang and Xu, Yuelei},
        booktitle={Proceedings of the 42th International Conference on Machine Learning},
        year={2025}
      }</code></pre>
    </div>
  </section>


  <footer class="footer">
    <div class="container">
      <div class="content has-text-centered">
        <a class="icon-link" href="">
          <i class="fas fa-file-pdf"></i>
        </a>
        <a class="icon-link" href="" class="external-link" disabled>
          <i class="fab fa-github"></i>
        </a>
      </div>
      <div class="columns is-centered">
        <div class="column is-8">
          <div class="content">
            <p>
              This website is licensed under a <a rel="license"
                href="http://creativecommons.org/licenses/by-sa/4.0/">Creative
                Commons Attribution-ShareAlike 4.0 International License</a>.
            </p>
            <p>
              This means you are free to borrow the <a href="https://github.com/nerfies/nerfies.github.io">source
                code</a> of this website,
              we just ask that you link back to this page in the footer.
              Please remember to remove the analytics code included in the header of the website which
              you do not want on your website.
            </p>
          </div>
        </div>
      </div>
    </div>
  </footer>

</body>

</html>
